{"version":3,"file":"upsert-profile.mjs","sources":["../../../../../../../../server/api/auth/upsert-profile.ts"],"sourcesContent":null,"names":["upsertProfile","defineEventHandler","async","event","getMethod","respondError","requireAuth","user","serverSupabaseUser","config","useRuntimeConfig","adminClient","createClient","public","supabaseUrl","supabaseServiceKey","auth","persistSession","data","existing","from","select","eq","id","maybeSingle","payload","email","role","updated_at","Date","toISOString","_a","user_metadata","full_name","parts","String","split","first_name","last_name","slice","join","name","_b","upsertRes","upsert","onConflict","error","message","respondSuccess","e","console"],"mappings":"mVAKA,MAAAA,EAAAC,EAAAC,MAAAC,YAEA,GAAA,SADAC,EAAAD,GACA,OAAAE,EAAA,uBAEA,UACAC,EAAAH,GACA,MAAAI,QAAAC,EAAAL,GACA,IAAAI,EAAA,OAAAF,EAAA,kBAEA,MAAAI,EAAAC,IACAC,EAAAC,EACAH,EAAAI,OAAAC,YACAL,EAAAM,mBACA,CAAAC,KAAA,CAAAC,gBAAA,MAIAC,KAAAC,SAAAR,EACAS,KAAA,YACAC,OAAA,0CACAC,GAAA,KAAAf,EAAAgB,IACAC,cAEAC,EAAA,CACAF,GAAAhB,EAAAgB,GACAG,MAAAnB,EAAAmB,MACAC,KAAA,WAAA,MAAAR,OAAA,EAAAA,EAAAQ,MAAA,QAAA,OACAC,YAAA,IAAAC,MAAAC,eAIA,GAAA,OAAAC,EAAAxB,EAAAyB,oBAAA,EAAAD,EAAAE,UAAA,CACA,MAAAC,EAAAC,OAAA5B,EAAAyB,cAAAC,WAAAG,MAAA,KACAX,EAAAY,WAAAH,EAAA,WAAAf,WAAAkB,aAAA,KACAZ,EAAAa,UAAAJ,EAAAK,MAAA,GAAAC,KAAA,OAAA,MAAArB,OAAA,EAAAA,EAAAmB,YAAA,IACA,CAEAb,EAAAgB,MAAA,MAAAtB,OAAA,EAAAA,EAAAsB,QAAA,OAAAC,IAAAV,oBAAA,EAAAU,EAAAT,YAAA1B,EAAAmB,MAEA,MAAAiB,QAAAhC,EACAS,KAAA,YACAwB,OAAAnB,EAAA,CAAAoB,WAAA,OACAxB,SACAG,cACA,OAAAmB,EAAAG,MAAAzC,EAAA,yBAAAsC,EAAAG,MAAAC,SAEAC,EAAAL,EAAAzB,MAAAO,EAAA,qBACA,OAAAwB,GAEA,OADAC,QAAAJ,MAAA,uCAAAG,GACA5C,EAAA,6BACA"}