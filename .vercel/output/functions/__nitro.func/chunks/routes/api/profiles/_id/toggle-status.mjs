import{d as r,g as e,s as o,h as s,a,b as t,r as i}from"../../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const d=r(async r=>{const d=e(r),n=await o(r),c=s(r,"id");if("PATCH"!==d)return{data:{success:!1,error:"MÃ©todo no permitido"}};if(!c)return{data:{success:!1,error:"ID de usuario requerido"}};try{await a(r);const{data:e,error:o}=await n.from("profiles").select("is_active").eq("id",c).single();if(o)return"PGRST116"===o.code?{data:{success:!1,error:"Usuario no encontrado"}}:(console.error("Error obteniendo estado del usuario:",o),{data:{success:!1,error:"Error obteniendo estado del usuario",details:o.message}});const s=!e.is_active,{data:i,error:d}=await n.from("profiles").update({is_active:s,updated_at:(new Date).toISOString()}).eq("id",c).select("id, is_active").single();return d?(console.error("Error actualizando estado del usuario:",d),{data:{success:!1,error:"Error actualizando estado del usuario",details:d.message}}):t({id:i.id,is_active:i.is_active},`Usuario ${i.is_active?"activado":"desactivado"} exitosamente`)}catch(r){return console.error("Error en PATCH /api/profiles/[id]/toggle-status:",r),i("Error interno del servidor")}});export{d as default};
//# sourceMappingURL=toggle-status.mjs.map
