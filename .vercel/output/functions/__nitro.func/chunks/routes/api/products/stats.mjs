import{d as o,g as t,s as r,r as e,a as s,b as a}from"../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const n=o(async o=>{const n=t(o),i=await r(o);if("GET"!==n)return e("MÃ©todo no permitido");try{await s(o);const t=new Date(Date.now()-6048e5).toISOString(),{count:r,error:n}=await i.from("products").select("id_product",{count:"exact",head:!0});if(n)return e("Error obteniendo productos",n.message);const{count:d,error:p}=await i.from("products").select("id_product",{count:"exact",head:!0}).gte("created_at",t);return p?e("Error obteniendo productos nuevos",p.message):a({totalProducts:r||0,newProducts:d||0})}catch(o){return console.error("GET /api/products/stats error:",o),e("Error interno del servidor")}});export{n as default};
//# sourceMappingURL=stats.mjs.map
