import{d as r,g as o,s as t,r as e,a as i,m as s,b as n}from"../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const a=r(async r=>{const a=o(r),d=await t(r);if("GET"!==a)return e("MÃ©todo no permitido");try{await i(r);const o=s(r),t=String(o.sku||"").trim(),a=o.exclude_id?String(o.exclude_id):null;if(!t)return e("SKU requerido");let p=d.from("products").select("id_product").eq("sku",t);a&&(p=p.neq("id_product",a));const{data:c,error:u}=await p.limit(1);if(u)return console.error("Error verificando SKU:",u),e("Error verificando SKU",u.message);const m=Array.isArray(c)&&c.length>0;return n({exists:m})}catch(r){return console.error("Error en GET /api/products/check-sku:",r),e("Error interno del servidor")}});export{a as default};
//# sourceMappingURL=check-sku.mjs.map
