import{d as r,s as o,g as t,h as e,a as s,b as a,r as d}from"../../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const i=r(async r=>{const i=await o(r),c=t(r),n=e(r,"id");if(!n)return{data:{success:!1,error:"ID de producto requerido"}};if("PATCH"!==c)return{data:{success:!1,error:"MÃ©todo no permitido"}};try{await s(r);const{data:o,error:t}=await i.from("products").select("is_active").eq("id_product",n).single();if(t)return"PGRST116"===t.code?{data:{success:!1,error:"Producto no encontrado"}}:{data:{success:!1,error:"Error obteniendo producto"}};const e=!o.is_active,{data:d,error:c}=await i.from("products").update({is_active:e,updated_at:(new Date).toISOString()}).eq("id_product",n).select().single();return c?{data:{success:!1,error:"Error actualizando producto"}}:a(d,`Producto ${e?"activado":"desactivado"} exitosamente`)}catch(r){return console.error("Error cambiando estado del producto:",r),d(r.statusMessage||r.message||"Error interno del servidor")}});export{i as default};
//# sourceMappingURL=toggle-status.mjs.map
