{"version":3,"file":"index7.mjs","sources":["../../../../../../../server/api/products/index.ts"],"sourcesContent":null,"names":["index","defineEventHandler","async","event","client","serverSupabaseClient","method","getMethod","query","getQuery","categoryId","category_id","String","search","page","Math","max","parseInt","pageSize","page_size","builder","from","select","order","ascending","eq","trim","like","or","to","range","data","products","error","getError","respondSuccess","requireAdmin","contentType","getHeader","body","uploadedImageUrl","includes","form","readMultipartFormData","fields","filePart","part","type","name","filename","_a","toString","fileExt","split","pop","filePath","crypto","randomUUID","uploadError","storage","upload","mimetype","upsert","createError","statusCode","statusMessage","publicUrl","getPublicUrl","readBody","requiredFields","field","productId","newProduct","createErr","insert","id_product","description","price","parseFloat","stock_quantity","brand","sku","image_url","is_active","created_at","Date","toISOString","updated_at","single","console","respondError","message"],"mappings":"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"}