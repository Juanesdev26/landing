import{d as r,g as e,s as t,h as a,r as o,a as s,b as i}from"../../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const n=r(async r=>{const n=e(r),d=await t(r),p=a(r,"id");if("PATCH"!==n)return o("MÃ©todo no permitido");if(!p)return o("ID de reserva requerido");try{await s(r);const{data:e,error:t}=await d.from("reservations").update({status:"cancelled",updated_at:(new Date).toISOString()}).eq("id_reservation",p).eq("status","pending").select().single();return t?o("Error cancelando reserva",t.message):i(e,"Reserva cancelada")}catch(r){return o("Error interno del servidor")}});export{n as default};
//# sourceMappingURL=cancel.mjs.map
