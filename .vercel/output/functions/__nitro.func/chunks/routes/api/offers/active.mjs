import{d as o,g as r,s as t,r as e,b as i}from"../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const s=o(async o=>{const s=r(o),a=await t(o);if("GET"!==s)return e("MÃ©todo no permitido");try{const o=(new Date).toISOString(),{data:r,error:t}=await a.from("offers").select("\n        *,\n        product:products(id_product, name, sku, price, image_url, stock_quantity)\n      ").eq("is_active",!0).or(`valid_from.is.null,valid_from.lte.${o}`).or(`valid_to.is.null,valid_to.gte.${o}`);return t?e("Error obteniendo ofertas",t.message):i(r)}catch(o){return console.error("GET /api/offers/active error:",o),e("Error interno del servidor")}});export{s as default};
//# sourceMappingURL=active.mjs.map
