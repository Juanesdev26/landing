{"version":3,"file":"index6.mjs","sources":["../../../../../../../server/api/orders/index.ts"],"sourcesContent":null,"names":["index","defineEventHandler","async","event","method","getMethod","supabase","serverSupabaseClient","requireAdmin","config","useRuntimeConfig","adminClient","createClient","public","supabaseUrl","supabaseServiceKey","auth","persistSession","data","orders","error","from","select","order","ascending","limit","console","success","details","message","processedOrders","map","customer_name","customer","first_name","last_name","customer_email","_a","email","customer_phone","_b","phone","items_count","order_items","reduce","n","it","Number","quantity","total_amount","s","total_price","unit_price","subtotal","respondSuccess","respondError","body","readBody","customer_id","length","customerError","eq","single","is_active","orderItems","item","product_id","product","productError","stock_quantity","name","totalPrice","push","taxAmount","tax_amount","shippingAmount","shipping_amount","totalAmount","newOrder","status","shipping_address","billing_address","payment_method","payment_status","tracking_number","notes","order_source","assigned_user_id","orderRes","insert","orderData","orderError","orderItemsWithOrderId","order_id","id_order","itemsError","delete","stockError","update","raw","updated_at","Date","toISOString","completeOrder","fetchError"],"mappings":"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"}