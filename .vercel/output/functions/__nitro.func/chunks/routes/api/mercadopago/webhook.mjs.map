{"version":3,"file":"webhook.mjs","sources":["../../../../../../../../server/api/mercadopago/webhook.ts"],"sourcesContent":null,"names":["webhook","defineEventHandler","async","event","getMethod","createError","statusCode","statusMessage","body","readBody","supabase","serverSupabaseClient","console","log","id","type","received","accessToken","process","env","MERCADOPAGO_ACCESS_TOKEN","error","paymentResponse","fetch","headers","Authorization","ok","paymentData","json","orderId","external_reference","data","order","orderError","from","select","eq","single","paymentStatus","status","updateError","update","payment_status","payment_method","updated_at","Date","toISOString","notes"],"mappings":"mTAEA,MAAAA,EAAAC,EAAAC,MAAAC,IAGA,GAAA,SAFAC,EAAAD,GAGA,OAAAE,EAAA,CACAC,WAAA,IACAC,cAAA,wBAIA,MAAAC,QAAAC,EAAAN,GACAO,QAAAC,EAAAR,GAEAS,QAAAC,IAAA,sCAAAL,GAEA,IAEA,MAAAM,GAAAA,EAAAC,KAAAA,GAAAP,EAEA,IAAAM,IAAAC,EAEA,OADAH,QAAAC,IAAA,kCACA,CAAAG,UAAA,GAIA,MAAAC,EAAAC,QAAAC,IAAAC,yBACA,IAAAH,EAEA,OADAL,QAAAS,MAAA,6CACA,CAAAL,UAAA,GAIA,MAAAM,QAAAC,MAAA,2CAAAT,IAAA,CACAU,QAAA,CACAC,cAAA,UAAAR,IACA,eAAA,sBAIA,IAAAK,EAAAI,GAEA,OADAd,QAAAS,MAAA,0DACA,CAAAL,UAAA,GAGA,MAAAW,QAAAL,EAAAM,OACAhB,QAAAC,IAAA,qBAAAc,GAGA,MAAAE,EAAAF,EAAAG,mBAEA,IAAAD,EAEA,OADAjB,QAAAC,IAAA,kDACA,CAAAG,UAAA,GAIA,MAAAe,KAAAC,EAAAX,MAAAY,SAAAvB,EACAwB,KAAA,UACAC,OAAA,0CACAC,GAAA,WAAAP,GACAQ,SAEA,GAAAJ,IAAAD,EAEA,OADApB,QAAAS,MAAA,0BAAAQ,GACA,CAAAb,UAAA,GAIA,IAAAsB,EAAA,UAEA,OAAAX,EAAAY,QACA,IAAA,WACAD,EAAA,OACA1B,QAAAC,IAAA,mBAAAgB,GACA,MACA,IAAA,WACAS,EAAA,SACA1B,QAAAC,IAAA,oBAAAgB,GACA,MACA,IAAA,UACAS,EAAA,UACA1B,QAAAC,IAAA,oBAAAgB,GACA,MACA,IAAA,YACAS,EAAA,SACA1B,QAAAC,IAAA,qBAAAgB,GACA,MACA,QAEA,OADAjB,QAAAC,IAAA,gCAAAc,EAAAY,QACA,CAAAvB,UAAA,GAIA,MAAAK,MAAAmB,SAAA9B,EACAwB,KAAA,UACAO,OAAA,CACAC,eAAAJ,EACAK,eAAA,cACAC,YAAA,IAAAC,MAAAC,cACAC,MAAA,WAAApB,EAAAY,uBAAAzB,mBAEAsB,GAAA,WAAAP,GAQA,OANAW,EACA5B,QAAAS,MAAA,uCAAAmB,GAEA5B,QAAAC,IAAA,mCAAAyB,kBAAAT,GAGA,CAAAb,UAAA,EAEA,OAAAK,GAEA,OADAT,QAAAS,MAAA,6CAAAA,GACA,CAAAL,UAAA,EACA"}