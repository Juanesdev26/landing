{"version":3,"file":"create-preference.mjs","sources":["../../../../../../../../server/api/mercadopago/create-preference.ts"],"sourcesContent":null,"names":["preference","Preference","MercadoPagoConfig","accessToken","process","env","MERCADOPAGO_ACCESS_TOKEN","options","timeout","createPreference","defineEventHandler","async","event","method","getMethod","supabase","serverSupabaseClient","respondError","requireAuth","authUser","serverSupabaseUser","body","readBody","customer_id","order_items","length","data","profile","error","profileError","from","select","eq","id","single","includes","role","is_active","customer","customerError","subtotal","items","item","product_id","quantity","product","productError","stock_quantity","name","unitPrice","Number","price","push","title","description","sku","category_id","currency_id","unit_price","picture_url","image_url","taxAmount","tax_amount","shippingAmount","shipping_amount","totalAmount","newOrder","total_amount","status","shipping_address","billing_address","payment_method","payment_status","tracking_number","notes","order_source","assigned_user_id","orderRes","insert","orderData","orderError","message","orderItems","map","i","total_price","order_id","id_order","itemsError","delete","preferenceData","payer","email","phone","number","back_urls","success","NUXT_PUBLIC_SITE_URL","failure","pending","auto_return","notification_url","external_reference","metadata","preferenceResult","create","update","payment_reference","respondSuccess","preference_id","init_point","sandbox_init_point","console"],"mappings":"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"}