import{d as r,g as t,s as e,r as o,a as s,b as a}from"../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const i=r(async r=>{const i=t(r),n=await e(r);if("GET"!==i)return o("MÃ©todo no permitido");try{await s(r);const{data:t,error:e}=await n.from("orders").select("id_order, total_amount, status, created_at, customer:customers(first_name, last_name)").order("created_at",{ascending:!1}).limit(10);if(e)return o("Error obteniendo actividad",e.message);const i=(t||[]).map(r=>({type:"order",title:"Nueva orden recibida",description:`Orden #${r.id_order} por $${r.total_amount}`,time:r.created_at,status:r.status,customer:r.customer?`${r.customer.first_name} ${r.customer.last_name}`:null}));return a(i)}catch(r){return console.error("GET /api/orders/recent error:",r),o("Error interno del servidor")}});export{i as default};
//# sourceMappingURL=recent.mjs.map
