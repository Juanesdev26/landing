{"version":3,"file":"create-from-customer.mjs","sources":["../../../../../../../../server/api/orders/create-from-customer.ts"],"sourcesContent":null,"names":["createFromCustomer","defineEventHandler","async","event","method","getMethod","supabase","serverSupabaseClient","respondError","requireAuth","authUser","serverSupabaseUser","body","readBody","customer_id","order_items","length","data","profile","error","profileError","from","select","eq","id","single","includes","role","is_active","customer","customerError","subtotal","orderItems","item","product_id","quantity","product","productError","stock_quantity","name","unitPrice","Number","price","totalPrice","push","unit_price","total_price","taxAmount","tax_amount","shippingAmount","shipping_amount","totalAmount","newOrder","total_amount","status","shipping_address","billing_address","payment_method","payment_status","tracking_number","notes","order_source","assigned_user_id","orderRes","insert","orderData","orderError","message","orderItemsWithOrderId","map","i","order_id","id_order","itemsError","delete","respondSuccess","console"],"mappings":"wUAIA,MAAAA,EAAAC,EAAAC,MAAAC,IACA,MAAAC,EAAAC,EAAAF,GACAG,QAAAC,EAAAJ,GAEA,GAAA,SAAAC,EACA,OAAAI,EAAA,uBAGA,UACAC,EAAAN,GACA,MAAAO,QAAAC,EAAAR,GACA,IAAAO,EAAA,OAAAF,EAAA,kBAEA,MAAAI,QAAAC,EAAAV,GACA,IAAAS,EAAAE,cAAAF,EAAAG,aAAA,IAAAH,EAAAG,YAAAC,OACA,OAAAR,EAAA,gDAIA,MAAAS,KAAAC,EAAAC,MAAAC,SAAAd,EACAe,KAAA,YACAC,OAAA,uBACAC,GAAA,KAAAb,EAAAc,IACAC,SACA,GAAAL,IAAAF,EAAA,OAAAV,EAAA,wBACA,IAAA,CAAA,WAAA,QAAAkB,SAAAR,EAAAS,MAAA,OAAAnB,EAAA,8CACA,IAAA,IAAAU,EAAAU,UAAA,OAAApB,EAAA,oBAGA,MAAAS,KAAAY,EAAAV,MAAAW,SAAAxB,EACAe,KAAA,aACAC,OAAA,0BACAC,GAAA,cAAAX,EAAAE,aACAW,SACA,GAAAK,IAAAD,EAAA,OAAArB,EAAA,yBACA,IAAA,IAAAqB,EAAAD,UAAA,OAAApB,EAAA,4BAGA,IAAAuB,EAAA,EACA,MAAAC,EAAA,GAEA,IAAA,MAAAC,KAAArB,EAAAG,YAAA,CACA,IAAAkB,EAAAC,aAAAD,EAAAE,SACA,OAAA3B,EAAA,qDAEA,MAAAS,KAAAmB,EAAAjB,MAAAkB,SAAA/B,EACAe,KAAA,YACAC,OAAA,2CACAC,GAAA,aAAAU,EAAAC,YACAT,SACA,GAAAY,IAAAD,EAAA,OAAA5B,EAAA,YAAAyB,EAAAC,4BACA,GAAAE,EAAAE,eAAAL,EAAAE,SACA,OAAA3B,EAAA,2BAAA4B,EAAAG,qBAAAH,EAAAE,+BAAAL,EAAAE,YAGA,MAAAK,EAAAC,OAAAL,EAAAM,OACAC,EAAAF,OAAAR,EAAAE,UAAAK,EACAT,GAAAY,EAEAX,EAAAY,KAAA,CACAV,WAAAD,EAAAC,WACAC,SAAAF,EAAAE,SACAU,WAAAL,EACAM,YAAAH,GAEA,CAEA,MAAAI,EAAAnC,EAAAoC,YAAA,EACAC,EAAArC,EAAAsC,iBAAA,EACAC,EAAApB,EAAAgB,EAAAE,EAEAG,EAAA,CACAtC,YAAAF,EAAAE,YACAuC,aAAAF,EACApB,WACAiB,WAAAD,EACAG,gBAAAD,EACAK,OAAA,UACAC,iBAAA3C,EAAA2C,kBAAA,KACAC,gBAAA5C,EAAA4C,iBAAA,KACAC,eAAA7C,EAAA6C,gBAAA,KACAC,eAAA,UACAC,gBAAA,KACAC,MAAAhD,EAAAgD,OAAA,KACAC,aAAA,WACAC,iBAAA,MAGAC,QAAAzD,EACAe,KAAA,UACA2C,OAAAZ,GACA9B,SACAG,SACAwC,EAAAF,EAAA9C,KACAiD,EAAAH,EAAA5C,MACA,GAAA+C,EAAA,OAAA1D,EAAA,uBAAA0D,EAAAC,SAEA,MAAAC,EAAApC,EAAAqC,IAAAC,IAAA,IAAAA,EAAAC,SAAAN,EAAAO,aACArD,MAAAsD,SAAAnE,EACAe,KAAA,eACA2C,OAAAI,GACA,OAAAK,SACAnE,EAAAe,KAAA,UAAAqD,SAAAnD,GAAA,WAAA0C,EAAAO,UACAhE,EAAA,iCAAAiE,EAAAN,UAKAQ,EAAAV,EAAA,6BACA,OAAA9C,GAEA,OADAyD,QAAAzD,MAAA,kDAAAA,GACAX,EAAA,6BACA"}