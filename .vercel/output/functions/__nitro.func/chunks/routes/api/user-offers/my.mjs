import{d as r,g as o,s as t,r as e,c as i,e as s,b as a}from"../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const n=r(async r=>{const n=o(r),d=await t(r);if("GET"!==n)return e("MÃ©todo no permitido");try{await i(r);const o=await s(r);if(!o)return e("No autenticado");const t=(new Date).toISOString(),{data:n,error:p}=await d.from("user_offers").select("\n        *,\n        product:products(id_product, name, sku, price, image_url)\n      ").eq("user_id",o.id).eq("is_active",!0).or(`valid_from.is.null,valid_from.lte.${t}`).or(`valid_to.is.null,valid_to.gte.${t}`);return p?e("Error obteniendo mis ofertas",p.message):a(n)}catch(r){return console.error("Error en GET /api/user-offers/my:",r),e("Error interno del servidor")}});export{n as default};
//# sourceMappingURL=my.mjs.map
