{"version":3,"file":"index.mjs","sources":["../../../../../../../server/api/categories/index.ts"],"sourcesContent":null,"names":["index","defineEventHandler","async","event","method","getMethod","supabase","serverSupabaseClient","setHeader","data","categories","error","from","select","eq","order","console","success","categoriesWithCounts","countError","processedCategories","map","category","product_count","_b","_a","products","count","respondSuccess","requireAdmin","contentType","getHeader","body","uploadedImageUrl","includes","form","readMultipartFormData","fields","filePart","part","type","name","filename","toString","fileExt","split","pop","filePath","crypto","randomUUID","uploadError","storage","upload","mimetype","upsert","publicUrl","getPublicUrl","readBody","trim","respondError","existingCategory","checkError","single","newCategory","description","image_url","is_active","insert"],"mappings":"8UASA,MAAAA,EAAAC,EAAAC,MAAAC,YACA,MAAAC,EAAAC,EAAAF,GACAG,QAAAC,EAAAJ,GAEA,GAAA,QAAAC,EACA,IACAI,EAAAL,EAAA,gBAAA,sBAEA,MAAAM,KAAAC,EAAAC,MAAAA,SAAAL,EACAM,KAAA,cACAC,OAAA,KACAC,GAAA,aAAA,GACAC,MAAA,QAEA,GAAAJ,EAEA,OADAK,QAAAL,MAAA,+BAAAA,GACA,CACAF,KAAA,CACAQ,SAAA,EACAN,MAAA,gCAMA,MAAAF,KAAAS,EAAAP,MAAAQ,SAAAb,EACAM,KAAA,cACAC,OAAA,gEAIAC,GAAA,aAAA,GACAC,MAAA,QAEAI,GACAH,QAAAL,MAAA,uDAAAQ,GAGA,MAAAC,GAAAF,GAAAR,GAAAW,IAAAC,YAAA,MAAA,IACAA,EACAC,eAAA,OAAAC,EAAA,OAAAC,EAAA,MAAAH,OAAA,EAAAA,EAAAI,iBAAAD,EAAA,SAAA,EAAAD,EAAAG,QAAA,KAGA,OAAAC,EAAAR,EACA,OAAAT,GAEA,OADAK,QAAAL,MAAA,oBAAAA,GACA,CACAF,KAAA,CACAQ,SAAA,EACAN,MAAA,8BAGA,CAGA,GAAA,SAAAP,EACA,UACAyB,EAAA1B,GACA,MAAA2B,EAAAC,EAAA5B,EAAA,iBAAA,GACA,IAAA6B,EAAA,CAAA,EACAC,EAAA,KACA,GAAAH,EAAAI,SAAA,uBAAA,CACA,MAAAC,QAAAC,EAAAjC,GACAkC,EAAA,CAAA,EACA,IAAAC,EAAA,KACA,IAAA,MAAAC,KAAAJ,GAAA,GACA,SAAAI,EAAAC,KACA,UAAAD,EAAAE,MAAAF,EAAA9B,MAAA8B,EAAAG,WAAAJ,EAAAC,GACAA,EAAAE,OACAJ,EAAAE,EAAAE,OAAA,OAAAhB,EAAAc,EAAA9B,eAAAkC,aAAA,IAIA,GADAX,EAAAK,EACAC,EAAA,CACA,MAAAM,EAAAN,EAAAI,SAAAG,MAAA,KAAAC,MACAC,EAAA,GAAAC,OAAAC,gBAAAL,KACAjC,MAAAuC,SAAA5C,EAAA6C,QACAvC,KAAA,iBACAwC,OAAAL,EAAAT,EAAA7B,KAAA,CAAAqB,YAAAQ,EAAAe,SAAAC,QAAA,IACA,IAAAJ,EAAA,CACA,MAAAzC,KAAA8C,GAAAjD,EAAA6C,QAAAvC,KAAA,iBAAA4C,aAAAT,GACAd,EAAAsB,EAAAA,SACA,CACA,CACA,MACAvB,QAAAyB,EAAAtD,GAIA,IAAA6B,EAAAS,OAAAT,EAAAS,KAAAiB,OACA,OAAAC,EAAA,4CAIA,MAAAlD,KAAAmD,EAAAjD,MAAAkD,SAAAvD,EACAM,KAAA,cACAC,OAAA,eACAC,GAAA,OAAAkB,EAAAS,KAAAiB,QACAI,SAEA,GAAAF,EACA,OAAAD,EAAA,0CAIA,MAAAI,EAAA,CACAtB,KAAAT,EAAAS,KAAAiB,OACAM,aAAA,OAAAxC,EAAAQ,EAAAgC,kBAAA,EAAAxC,EAAAkC,SAAA,KACAO,UAAAhC,GAAAD,EAAAiC,WAAA,KACAC,eAAA,IAAAlC,EAAAkC,WAAAlC,EAAAkC,YAGAzD,KAAAA,EAAAE,MAAAA,SAAAL,EACAM,KAAA,cACAuD,OAAAJ,GACAlD,SACAiD,SAEA,OAAAnD,GACAK,QAAAL,MAAA,2BAAAA,GACAgD,EAAA,4BAGA/B,EAAA,IAAAnB,EAAAc,cAAA,GAAA,gCACA,OAAAZ,GAEA,OADAK,QAAAL,MAAA,oBAAAA,GACAgD,EAAA,6BACA,CAIA,OAAAA,EAAA"}