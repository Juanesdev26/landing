import{d as r,g as e,s as o,h as t,a,b as s,r as i}from"../../../../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";const d=r(async r=>{const d=e(r),n=await o(r),c=t(r,"id");if("PATCH"!==d)return{data:{success:!1,error:"MÃ©todo no permitido"}};if(!c)return{data:{success:!1,error:"ID de proveedor requerido"}};try{await a(r);const{data:e,error:o}=await n.from("providers").select("is_active").eq("id_provider",c).single();if(o)return"PGRST116"===o.code?{data:{success:!1,error:"Proveedor no encontrado"}}:{data:{success:!1,error:"Error obteniendo proveedor"}};const t=!e.is_active,{data:i,error:d}=await n.from("providers").update({is_active:t,updated_at:(new Date).toISOString()}).eq("id_provider",c).select("id_provider, name, is_active").single();return d?{data:{success:!1,error:"Error actualizando proveedor"}}:s(i,`Proveedor ${t?"activado":"desactivado"} exitosamente`)}catch(r){return console.error("Error cambiando estado del proveedor:",r),i(r.statusMessage||r.message||"Error interno del servidor")}});export{d as default};
//# sourceMappingURL=toggle-status.mjs.map
