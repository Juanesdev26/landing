import{createRenderer as e,getRequestDependencies as t,getPreloadLinks as r,getPrefetchLinks as n}from"vue-bundle-renderer/runtime";import{o,f as a,q as s,v as i,m as c,n as u,w as l,u as d,x as p,y as f}from"../_/nitro.mjs";import{renderToString as h}from"vue/server-renderer";import{createHead as y,propsToString as g,renderSSRHead as m}from"unhead/server";import{walkResolver as b}from"unhead/utils";import{toValue as w,isRef as v,hasInjectionContext as $,inject as j,ref as O,watchEffect as S,getCurrentInstance as k,onBeforeUnmount as C,onDeactivated as _,onActivated as A}from"vue";import{DeprecationsPlugin as x,PromisesPlugin as P,TemplateParamsPlugin as T,AliasSortingPlugin as R}from"unhead/plugins";const VueResolver=(e,t)=>v(t)?w(t):t,E="usehead";function useHead(e,t={}){const r=t.head||function(){if($()){const e=j(E);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}();return r.ssr?r.push(e||{},t):function(e,t,r={}){const n=O(!1);let o;S(()=>{const a=n.value?{}:b(t,VueResolver);o?o.patch(a):o=e.push(a,r)});k()&&(C(()=>{o.dispose()}),_(()=>{n.value=!0}),A(()=>{n.value=!1}));return o}(r,e,t)}function createHead(e={}){const t=y({...e,propResolvers:[VueResolver]});return t.install=function(e){return{install(t){t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide(E,e)}}.install}(t),t}const N={meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"description",content:"Tu tienda de belleza y moda femenina con los mejores productos seleccionados especialmente para la mujer moderna y elegante."},{name:"theme-color",content:"#ec4899"}],link:[{rel:"icon",href:"/favicon.ico"}],style:[],script:[{tagPosition:"head",children:";(function(){try{var t=localStorage.getItem('theme');var d=t?t==='dark':window.matchMedia('(prefers-color-scheme: dark)').matches;var e=document.documentElement;e.classList.remove('theme-light','theme-dark','dark');if(d){e.classList.add('theme-dark');e.classList.add('dark');}else{e.classList.add('theme-light');}}catch(_e){}})();"}],noscript:[],title:"BylotoStore - Tu E-commerce Femenino"},z={id:"teleports"},U=`<div${g({id:"__nuxt",class:"isolate"})}>`,L="</div>",getClientManifest=()=>import("../build/client.manifest.mjs").then(e=>e.default||e).then(e=>"function"==typeof e?e():e),H=lazyCachedFunction(async()=>{const t=await getClientManifest();if(!t)throw new Error("client.manifest is not available");const r=await import("../build/server.mjs").then(e=>e.default||e);if(!r)throw new Error("Server bundle is not available");return e(r,{manifest:t,renderToString:async function(e,t){const r=await h(e,t);return U+r+L},buildAssetsURL:o})}),M=lazyCachedFunction(async()=>{const t=await getClientManifest(),r=await import("../virtual/_virtual_spa-template.mjs").then(e=>e.template).catch(()=>"").then(e=>U+e+L),n=e(()=>()=>{},{manifest:t,renderToString:()=>r,buildAssetsURL:o}),s=await n.renderToString({});return{rendererContext:n.rendererContext,renderToString:e=>{const t=a(e.event);return e.modules||=new Set,e.payload.serverRendered=!1,e.config={public:t.public,app:t.app},Promise.resolve(s)}}});function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch(e=>{throw t=null,e})),t)}const J="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",D=/[<>\b\f\n\r\t\0\u2028\u2029]/g,B=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/,F={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},Z=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function devalue(e){const t=new Map;let r=0;function log(e){r<100&&(console.warn(e),r+=1)}!function walk(e){if("function"!=typeof e){if(t.has(e))t.set(e,t.get(e)+1);else if(t.set(e,1),!isPrimitive(e)){switch(getType(e)){case"Number":case"String":case"Boolean":case"Date":case"RegExp":return;case"Array":e.forEach(walk);break;case"Set":case"Map":Array.from(e).forEach(walk);break;default:const t=Object.getPrototypeOf(e);t!==Object.prototype&&null!==t&&Object.getOwnPropertyNames(t).sort().join("\0")!==Z?"function"!=typeof e.toJSON&&log(`Cannot stringify arbitrary non-POJOs ${e.constructor.name}`):Object.getOwnPropertySymbols(e).length>0?log(`Cannot stringify POJOs with symbolic keys ${Object.getOwnPropertySymbols(e).map(e=>e.toString())}`):Object.keys(e).forEach(t=>walk(e[t]))}}}else log(`Cannot stringify a function ${e.name}`)}(e);const n=new Map;function stringify(e){if(n.has(e))return n.get(e);if(isPrimitive(e))return stringifyPrimitive(e);const t=getType(e);switch(t){case"Number":case"String":case"Boolean":return`Object(${stringify(e.valueOf())})`;case"RegExp":return e.toString();case"Date":return`new Date(${e.getTime()})`;case"Array":const r=e.map((t,r)=>r in e?stringify(t):""),n=0===e.length||e.length-1 in e?"":",";return`[${r.join(",")}${n}]`;case"Set":case"Map":return`new ${t}([${Array.from(e).map(stringify).join(",")}])`;default:if(e.toJSON){let t=e.toJSON();if("String"===getType(t))try{t=JSON.parse(t)}catch(e){}return stringify(t)}return null===Object.getPrototypeOf(e)?0===Object.keys(e).length?"Object.create(null)":`Object.create(null,{${Object.keys(e).map(t=>`${safeKey(t)}:{writable:true,enumerable:true,value:${stringify(e[t])}}`).join(",")}})`:`{${Object.keys(e).map(t=>`${safeKey(t)}:${stringify(e[t])}`).join(",")}}`}}Array.from(t).filter(e=>e[1]>1).sort((e,t)=>t[1]-e[1]).forEach((e,t)=>{n.set(e[0],function(e){let t="";do{t=J[e%54]+t,e=~~(e/54)-1}while(e>=0);return B.test(t)?`${t}0`:t}(t))});const o=stringify(e);if(n.size){const e=[],t=[],r=[];return n.forEach((n,o)=>{if(e.push(n),isPrimitive(o))return void r.push(stringifyPrimitive(o));switch(getType(o)){case"Number":case"String":case"Boolean":r.push(`Object(${stringify(o.valueOf())})`);break;case"RegExp":r.push(o.toString());break;case"Date":r.push(`new Date(${o.getTime()})`);break;case"Array":r.push(`Array(${o.length})`),o.forEach((e,r)=>{t.push(`${n}[${r}]=${stringify(e)}`)});break;case"Set":r.push("new Set"),t.push(`${n}.${Array.from(o).map(e=>`add(${stringify(e)})`).join(".")}`);break;case"Map":r.push("new Map"),t.push(`${n}.${Array.from(o).map(([e,t])=>`set(${stringify(e)}, ${stringify(t)})`).join(".")}`);break;default:r.push(null===Object.getPrototypeOf(o)?"Object.create(null)":"{}"),Object.keys(o).forEach(e=>{t.push(`${n}${function(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?`.${e}`:`[${escapeUnsafeChars(JSON.stringify(e))}]`}(e)}=${stringify(o[e])}`)})}}),t.push(`return ${o}`),`(function(${e.join(",")}){${t.join(";")}}(${r.join(",")}))`}return o}function isPrimitive(e){return Object(e)!==e}function stringifyPrimitive(e){if("string"==typeof e)return function(e){let t='"';for(let r=0;r<e.length;r+=1){const n=e.charAt(r),o=n.charCodeAt(0);if('"'===n)t+='\\"';else if(n in F)t+=F[n];else if(o>=55296&&o<=57343){const a=e.charCodeAt(r+1);t+=o<=56319&&a>=56320&&a<=57343?n+e[++r]:`\\u${o.toString(16).toUpperCase()}`}else t+=n}return t+='"',t}(e);if(void 0===e)return"void 0";if(0===e&&1/e<0)return"-0";const t=String(e);return"number"==typeof e?t.replace(/^(-)?0\./,"$1."):t}function getType(e){return Object.prototype.toString.call(e).slice(8,-1)}function escapeUnsafeChar(e){return F[e]||e}function escapeUnsafeChars(e){return e.replace(D,escapeUnsafeChar)}function safeKey(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?e:escapeUnsafeChars(JSON.stringify(e))}function renderPayloadScript(e){e.data.config=e.ssrContext.config;const t=devalue(e.data),r=`window.__NUXT__=${t}`;return JSON.stringify("nuxt-app"),[{innerHTML:r}]}const K={disableDefaults:!0,disableCapoSorting:!0,plugins:[x,P,T,R]};const q={omitLineBreaks:!1};globalThis.__buildAssetsURL=o,globalThis.__publicAssetsURL=i;const I=!!z.id,W=I?`<div${g(z)}>`:"",X=I?"</div>":"",Y=s(async e=>{const o=d(),s=e.path.startsWith("/__nuxt_error")?c(e):null;if(s&&!("__unenv__"in e.node.req))throw u({statusCode:404,statusMessage:"Page Not Found: /__nuxt_error"});const i=function(e){return{url:e.path,event:e,runtimeConfig:a(e),noSSR:e.context.nuxt?.noSSR||!1,head:createHead(K),error:!1,nuxt:void 0,payload:{},_payloadReducers:Object.create(null),modules:new Set}}(e),h={mode:"server"};i.head.push(N,h),s&&(s.statusCode&&=Number.parseInt(s.statusCode),function(e,t){e.error=!0,e.payload={error:t},e.url=t.url}(i,s));const y=l(e);!1===y.ssr&&(i.noSSR=!0);const g=await function(e){return e.noSSR?M():H()}(i),b=await g.renderToString(i).catch(async e=>{if(i._renderResponse&&"skipping render"===e.message)return{};const t=!s&&i.payload?.error||e;throw await(i.nuxt?.hooks.callHook("app:error",t)),t}),w=[];if(await(i.nuxt?.hooks.callHook("app:rendered",{ssrContext:i,renderResult:b})),i._renderResponse)return i._renderResponse;if(i.payload?.error&&!s)throw i.payload.error;const v=y.noScripts,{styles:$,scripts:j}=t(i,g.rendererContext);w.length&&i.head.push({style:w});const O=[];for(const e of Object.values($))O.push({rel:"stylesheet",href:g.rendererContext.buildAssetsURL(e.file),crossorigin:""});if(O.length&&i.head.push({link:O},h),v||(i.head.push({link:r(i,g.rendererContext)},h),i.head.push({link:n(i,g.rendererContext)},h),i.head.push({script:renderPayloadScript({ssrContext:i,data:i.payload})},{...h,tagPosition:"bodyClose",tagPriority:"high"})),!y.noScripts){const e="head";i.head.push({script:Object.values(j).map(t=>({type:t.module?"module":null,src:g.rendererContext.buildAssetsURL(t.file),defer:!t.module||null,tagPosition:e,crossorigin:""}))},h)}const{headTags:S,bodyTags:k,bodyTagsOpen:C,htmlAttrs:_,bodyAttrs:A}=await m(i.head,q),x={htmlAttrs:_?[_]:[],head:normalizeChunks([S]),bodyAttrs:A?[A]:[],bodyPrepend:normalizeChunks([C,i.teleports?.body]),body:[b.html,W+(I?joinTags([i.teleports?.[`#${z.id}`]]):"")+X],bodyAppend:[k]};return await o.hooks.callHook("render:html",x,{event:e}),{body:(P=x,`<!DOCTYPE html><html${joinAttrs(P.htmlAttrs)}><head>${joinTags(P.head)}</head><body${joinAttrs(P.bodyAttrs)}>${joinTags(P.bodyPrepend)}${joinTags(P.body)}${joinTags(P.bodyAppend)}</body></html>`),statusCode:f(e),statusMessage:p(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}};var P});function normalizeChunks(e){return e.filter(Boolean).map(e=>e.trim())}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}const G=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{E as h,G as r,useHead as u};
//# sourceMappingURL=renderer.mjs.map
