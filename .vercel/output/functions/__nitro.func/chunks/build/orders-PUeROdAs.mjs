import{b as e,_ as t,a as i}from"./server.mjs";import{ref as s,computed as r,mergeProps as d,unref as n,withCtx as o,createVNode as a,createTextVNode as l,useSSRContext as c}from"vue";import{ssrRenderAttrs as m,ssrIncludeBooleanAttr as p,ssrRenderComponent as u,ssrInterpolate as v,ssrRenderList as h,ssrRenderClass as x,ssrRenderAttr as g}from"vue/server-renderer";import{t as b}from"./useCurrency-BC2d31xw.mjs";import"../_/nitro.mjs";import"@supabase/supabase-js";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@supabase/ssr";import"@iconify/utils";import"node:crypto";import"consola";import"ioredis";import"node:fs";import"node:path";import"pinia";import"vue-router";import"tailwindcss/colors";import"@iconify/vue";import"reka-ui";import"@vueuse/core";import"tailwind-variants";import"@iconify/utils/lib/css/icon";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"unhead/plugins";const f={__name:"orders",__ssrInlineRender:!0,setup(c){const f=s(!1),y=s([]),{formatCOP:w}=b(),{$toast:$}=e(),_=r(()=>{const e={pending:0,confirmed:0,shipped:0,delivered:0};return y.value.forEach(t=>{e.hasOwnProperty(t.status)&&e[t.status]++}),e}),k=r(()=>y.value.filter(e=>["confirmed","shipped","delivered"].includes(e.status)).reduce((e,t)=>e+(t.total_amount||0),0));return(e,s,r,c)=>{const b=t,$=i;s(`<div${m(d({class:"min-h-screen theme-container"},c))}><div class="max-w-6xl mx-auto p-6"><div class="flex items-center justify-between mb-6"><div><h1 class="text-3xl font-bold theme-text-primary">Mis Pedidos</h1><p class="text-theme-text-secondary mt-2">Historial completo de tus compras</p></div><div class="flex items-center gap-4"><button${p(n(f))?" disabled":""} class="inline-flex items-center px-4 py-2 theme-button hover:theme-button-hover transition-colors">`),s(u(b,{name:"heroicons:arrow-path",class:["w-4 h-4 mr-2",{"animate-spin":n(f)}]},null,r)),s(` ${v(n(f)?"Actualizando...":"Actualizar")}</button>`),s(u($,{to:"/shop/cart",class:"inline-flex items-center px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors"},{default:o((e,t,i,s)=>{if(!t)return[a(b,{name:"heroicons:shopping-cart",class:"w-5 h-5 mr-2"}),l(" Ir al carrito ")];t(u(b,{name:"heroicons:shopping-cart",class:"w-5 h-5 mr-2"},null,i,s)),t(" Ir al carrito ")}),_:1},r)),s('</div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"><div class="theme-card-bg rounded-lg p-4 border theme-card-border"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">'),s(u(b,{name:"heroicons:clock",class:"w-5 h-5 text-blue-600"},null,r)),s(`</div><div><div class="text-sm theme-text-secondary">Pendientes</div><div class="text-lg font-semibold theme-text-primary">${v(n(_).pending)}</div></div></div></div><div class="theme-card-bg rounded-lg p-4 border theme-card-border"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">`),s(u(b,{name:"heroicons:check-circle",class:"w-5 h-5 text-green-600"},null,r)),s(`</div><div><div class="text-sm theme-text-secondary">Entregados</div><div class="text-lg font-semibold theme-text-primary">${v(n(_).delivered)}</div></div></div></div><div class="theme-card-bg rounded-lg p-4 border theme-card-border"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">`),s(u(b,{name:"heroicons:truck",class:"w-5 h-5 text-purple-600"},null,r)),s(`</div><div><div class="text-sm theme-text-secondary">Enviados</div><div class="text-lg font-semibold theme-text-primary">${v(n(_).shipped)}</div></div></div></div><div class="theme-card-bg rounded-lg p-4 border theme-card-border"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center">`),s(u(b,{name:"heroicons:currency-dollar",class:"w-5 h-5 text-pink-600"},null,r)),s(`</div><div><div class="text-sm theme-text-secondary">Total Gastado</div><div class="text-lg font-semibold theme-text-primary">${v(n(w)(n(k)))}</div></div></div></div></div><div class="theme-card-bg rounded-lg shadow-sm"><div class="p-6 border-b theme-border"><h2 class="text-lg font-semibold theme-text-primary">Historial de Pedidos</h2></div>`),n(f)?(s('<div class="p-8 text-center">'),s(u(b,{name:"heroicons:arrow-path",class:"w-8 h-8 mx-auto mb-4 text-pink-500 animate-spin"},null,r)),s('<p class="theme-text-secondary">Cargando pedidos...</p></div>')):0===n(y).length?(s('<div class="p-8 text-center">'),s(u(b,{name:"heroicons:shopping-bag",class:"w-16 h-16 mx-auto mb-4 text-gray-400"},null,r)),s('<h3 class="text-lg font-semibold theme-text-primary mb-2">No tienes pedidos</h3><p class="theme-text-secondary mb-4">Cuando realices tu primera compra, aparecerá aquí.</p>'),s(u($,{to:"/shop",class:"inline-flex items-center px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors"},{default:o((e,t,i,s)=>{if(!t)return[a(b,{name:"heroicons:shopping-bag",class:"w-5 h-5 mr-2"}),l(" Comenzar a Comprar ")];t(u(b,{name:"heroicons:shopping-bag",class:"w-5 h-5 mr-2"},null,i,s)),t(" Comenzar a Comprar ")}),_:1},r)),s("</div>")):(s('<div class="divide-y theme-border">\x3c!--[--\x3e'),h(n(y),e=>{var t,i,d,c;s('<div class="p-6 hover:bg-gray-50 transition-colors"><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center">'),s(u(b,{name:"heroicons:receipt-percent",class:"w-6 h-6 text-pink-600"},null,r)),s(`</div><div><h3 class="text-lg font-semibold theme-text-primary"> Pedido #${v((e.id_order||"").slice(0,8))}</h3><p class="text-sm theme-text-secondary">${v((d=e.created_at,new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})))}</p></div></div><div class="flex items-center gap-3"><span class="${x([(i=e.status,{pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[i]||"bg-gray-100 text-gray-800"),"px-3 py-1 text-sm font-medium rounded-full"])}">${v((c=e.status,{pending:"Pendiente",confirmed:"Confirmado",shipped:"Enviado",delivered:"Entregado",cancelled:"Cancelado"}[c]||c))}</span><div class="text-right"><div class="text-lg font-bold theme-text-primary">${v(n(w)(e.total_amount||0))}</div><div class="text-xs theme-text-secondary">${v((null==(t=e.order_items)?void 0:t.length)||0)} producto(s)</div></div></div></div><div class="mb-4"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">\x3c!--[--\x3e`),h(e.order_items,e=>{var t,i,d,o;s('<div class="flex items-center gap-3 p-3 bg-white rounded-lg border"><div class="w-12 h-12 bg-gray-100 rounded flex items-center justify-center overflow-hidden">'),(null==(t=e.product)?void 0:t.image_url)?s(`<img${g("src",e.product.image_url)}${g("alt",null==(i=e.product)?void 0:i.name)} class="w-full h-full object-cover">`):s(u(b,{name:"heroicons:cube",class:"w-6 h-6 text-pink-500"},null,r)),s(`</div><div class="flex-1 min-w-0"><div class="font-medium theme-text-primary truncate">${v(null==(d=e.product)?void 0:d.name)}</div><div class="text-sm theme-text-secondary">SKU: ${v(null==(o=e.product)?void 0:o.sku)}</div><div class="text-sm theme-text-secondary">Cant: ${v(e.quantity)}</div></div><div class="text-sm font-medium theme-text-primary">${v(n(w)(e.total_price||e.quantity*e.unit_price))}</div></div>`)}),s('\x3c!--]--\x3e</div></div><div class="flex items-center justify-between pt-4 border-t theme-border"><div class="flex items-center gap-4">'),s(u($,{to:`/orders/${e.id_order}`,class:"inline-flex items-center px-3 py-2 text-sm theme-button hover:theme-button-hover transition-colors"},{default:o((e,t,i,s)=>{if(!t)return[a(b,{name:"heroicons:eye",class:"w-4 h-4 mr-1"}),l(" Ver Detalles ")];t(u(b,{name:"heroicons:eye",class:"w-4 h-4 mr-1"},null,i,s)),t(" Ver Detalles ")}),_:2},r)),"pending"===e.status?(s('<button class="inline-flex items-center px-3 py-2 text-sm text-red-600 hover:text-red-700 transition-colors">'),s(u(b,{name:"heroicons:x-circle",class:"w-4 h-4 mr-1"},null,r)),s(" Cancelar </button>")):s("\x3c!----\x3e"),s('</div><div class="text-sm theme-text-secondary">'),"pending"===e.status?(s("<div>"),s(u(b,{name:"heroicons:clock",class:"w-4 h-4 inline mr-1"},null,r)),s(" Pendiente de pago </div>")):"confirmed"===e.status?(s("<div>"),s(u(b,{name:"heroicons:check-circle",class:"w-4 h-4 inline mr-1 text-green-500"},null,r)),s(" Confirmado </div>")):"shipped"===e.status?(s("<div>"),s(u(b,{name:"heroicons:truck",class:"w-4 h-4 inline mr-1 text-blue-500"},null,r)),s(" En camino </div>")):"delivered"===e.status?(s("<div>"),s(u(b,{name:"heroicons:check-badge",class:"w-4 h-4 inline mr-1 text-green-500"},null,r)),s(" Entregado </div>")):s("\x3c!----\x3e"),s("</div></div></div>")}),s("\x3c!--]--\x3e</div>")),s("</div></div></div>")}}},y=f.setup;f.setup=(e,t)=>{const i=c();return(i.modules||(i.modules=new Set)).add("pages/user/orders.vue"),y?y(e,t):void 0};export{f as default};
//# sourceMappingURL=orders-PUeROdAs.mjs.map
